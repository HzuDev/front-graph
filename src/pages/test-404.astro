---
import Layout from '../layouts/Layout.astro';
import { buildPath } from '../lib/utils/paths';

const title = 'Test de Rutas y 404';
const description = 'P√°gina para probar las rutas y la p√°gina 404';
---

<Layout title={title} description={description}>
  <main class="min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4">
    <div class="max-w-4xl mx-auto">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8">
        <!-- Header -->
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2">
            Test de Rutas y 404
          </h1>
          <p class="text-gray-600 dark:text-gray-300">
            Esta p√°gina te permite probar las rutas y la p√°gina 404 personalizada.
          </p>
        </div>

        <!-- Informaci√≥n del entorno -->
        <div class="mb-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
          <h2 class="text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3">
            Informaci√≥n del entorno
          </h2>
          <div class="space-y-2 text-sm font-mono">
            <div class="flex">
              <span class="font-semibold text-blue-700 dark:text-blue-300 w-32">BASE_URL:</span>
              <span class="text-gray-800 dark:text-gray-200" id="base-url">Cargando...</span>
            </div>
            <div class="flex">
              <span class="font-semibold text-blue-700 dark:text-blue-300 w-32">SITE:</span>
              <span class="text-gray-800 dark:text-gray-200" id="site">Cargando...</span>
            </div>
            <div class="flex">
              <span class="font-semibold text-blue-700 dark:text-blue-300 w-32">Current URL:</span>
              <span class="text-gray-800 dark:text-gray-200" id="current-url">Cargando...</span>
            </div>
            <div class="flex">
              <span class="font-semibold text-blue-700 dark:text-blue-300 w-32">Mode:</span>
              <span class="text-gray-800 dark:text-gray-200" id="mode">Cargando...</span>
            </div>
          </div>
        </div>

        <!-- Rutas v√°lidas -->
        <div class="mb-8">
          <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
            ‚úÖ Rutas v√°lidas
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Estas rutas deber√≠an funcionar correctamente:
          </p>
          <div class="grid gap-3">
            <a
              href={buildPath('/')}
              class="block p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors border border-green-200 dark:border-green-800"
            >
              <span class="font-semibold text-green-900 dark:text-green-100">Inicio</span>
              <span class="text-green-700 dark:text-green-300 text-sm ml-2 font-mono">{buildPath('/')}</span>
            </a>

            <a
              href={buildPath('/search')}
              class="block p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors border border-green-200 dark:border-green-800"
            >
              <span class="font-semibold text-green-900 dark:text-green-100">B√∫squeda</span>
              <span class="text-green-700 dark:text-green-300 text-sm ml-2 font-mono">{buildPath('/search')}</span>
            </a>

            <a
              href={buildPath('/search?q=eva')}
              class="block p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors border border-green-200 dark:border-green-800"
            >
              <span class="font-semibold text-green-900 dark:text-green-100">B√∫squeda con query</span>
              <span class="text-green-700 dark:text-green-300 text-sm ml-2 font-mono">{buildPath('/search?q=eva')}</span>
            </a>

            <a
              href={buildPath('/mapa')}
              class="block p-4 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors border border-green-200 dark:border-green-800"
            >
              <span class="font-semibold text-green-900 dark:text-green-100">Mapa</span>
              <span class="text-green-700 dark:text-green-300 text-sm ml-2 font-mono">{buildPath('/mapa')}</span>
            </a>
          </div>
        </div>

        <!-- Rutas inv√°lidas (404) -->
        <div class="mb-8">
          <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
            ‚ùå Rutas inv√°lidas (Probar 404)
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Estas rutas deber√≠an mostrar la p√°gina 404:
          </p>
          <div class="grid gap-3">
            <a
              href={buildPath('/ruta-que-no-existe')}
              class="block p-4 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors border border-red-200 dark:border-red-800"
            >
              <span class="font-semibold text-red-900 dark:text-red-100">Ruta inexistente</span>
              <span class="text-red-700 dark:text-red-300 text-sm ml-2 font-mono">{buildPath('/ruta-que-no-existe')}</span>
            </a>

            <a
              href={buildPath('/pagina/inexistente')}
              class="block p-4 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors border border-red-200 dark:border-red-800"
            >
              <span class="font-semibold text-red-900 dark:text-red-100">Ruta anidada inexistente</span>
              <span class="text-red-700 dark:text-red-300 text-sm ml-2 font-mono">{buildPath('/pagina/inexistente')}</span>
            </a>

            <a
              href={buildPath('/404')}
              class="block p-4 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors border border-red-200 dark:border-red-800"
            >
              <span class="font-semibold text-red-900 dark:text-red-100">P√°gina 404 directa</span>
              <span class="text-red-700 dark:text-red-300 text-sm ml-2 font-mono">{buildPath('/404')}</span>
            </a>

            <a
              href={buildPath('/test/error/deep/path')}
              class="block p-4 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors border border-red-200 dark:border-red-800"
            >
              <span class="font-semibold text-red-900 dark:text-red-100">Ruta profunda inexistente</span>
              <span class="text-red-700 dark:text-red-300 text-sm ml-2 font-mono">{buildPath('/test/error/deep/path')}</span>
            </a>
          </div>
        </div>

        <!-- Instrucciones -->
        <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800">
          <h3 class="font-semibold text-yellow-900 dark:text-yellow-100 mb-2">
            üìù Instrucciones de prueba
          </h3>
          <ol class="list-decimal list-inside space-y-2 text-sm text-yellow-800 dark:text-yellow-200">
            <li>Las rutas v√°lidas (verdes) deber√≠an cargar correctamente</li>
            <li>Las rutas inv√°lidas (rojas) deber√≠an mostrar la p√°gina 404 personalizada</li>
            <li>La p√°gina 404 debe tener dise√±o completo con botones de navegaci√≥n</li>
            <li>Desde la p√°gina 404 deber√≠as poder volver al inicio o buscar</li>
            <li>En GitHub Pages, el <code>404.html</code> redirige autom√°ticamente a la p√°gina 404 de Astro</li>
          </ol>
        </div>

        <!-- Bot√≥n de regreso -->
        <div class="mt-8">
          <a
            href={buildPath('/')}
            class="inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors shadow-md"
          >
            <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Volver al inicio
          </a>
        </div>
      </div>
    </div>
  </main>
</Layout>

<script>
  // Mostrar informaci√≥n del entorno
  document.addEventListener('DOMContentLoaded', () => {
    const baseUrl = import.meta.env.BASE_URL || '/';
    const site = import.meta.env.SITE || 'N/A';
    const currentUrl = window.location.href;
    const mode = import.meta.env.DEV ? 'Development' : 'Production';

    document.getElementById('base-url')!.textContent = baseUrl;
    document.getElementById('site')!.textContent = site;
    document.getElementById('current-url')!.textContent = currentUrl;
    document.getElementById('mode')!.textContent = mode;

    console.log('Test 404 Page Info:', {
      baseUrl,
      site,
      currentUrl,
      mode,
      env: import.meta.env
    });
  });
</script>
